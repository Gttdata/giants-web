<div>
    <div class="header">
        <button type="button" nz-button (click)="close(myForm)" class="ant-btn">
            <i nz-icon nzType="close" nzTheme="outline"></i>
        </button>
    </div>

    <form nz-form #myForm="ngForm">
        <nz-spin [nzSpinning]="isSpinning">
            <div nz-row class="my-box" [nzGutter]="15">
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" style="text-align: center;">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Notification Mode</nz-form-label>

                        <nz-input-group>
                            <nz-radio-group name="sharingMode" [(ngModel)]="sharingMode"
                                (ngModelChange)="changeRadio($event)" nzButtonStyle="solid">
                                <label nz-radio-button nzValue="I" *ngIf="btnIndividualStatus">Individual</label>
                                <label nz-radio-button nzValue="F" *ngIf="btnFederationStatus">Federation</label>
                                <label nz-radio-button nzValue="U" *ngIf="btnUnitStatus">Unit</label>
                                <label nz-radio-button nzValue="G" *ngIf="btnGroupStatus">Group</label>
                                <!-- <label nz-radio-button nzValue="EO" *ngIf="btnEntireOrganisationStatus">
                                    Entire Organization
                                </label> -->
                            </nz-radio-group>
                        </nz-input-group>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row class="my-box" nzGutter="5">
                <div nz-col nzSpan="12">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>Notification Type</nz-form-label>

                        <nz-form-control>
                            <nz-select name="notiType" [(ngModel)]="NOTI_TYPE" required>
                                <nz-option nzValue="T" nzLabel="Text"></nz-option>
                                <nz-option nzValue="I" nzLabel="Image"></nz-option>
                                <!-- <nz-option nzValue="F" nzLabel="File"></nz-option> -->
                                <!-- <nz-option nzValue="V" nzLabel="Video"></nz-option> -->
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="24" *ngIf="!entireOrg">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>{{heading}}</nz-form-label>

                        <nz-input-group>
                            <nz-select name="userID" nzShowSearch nzAllowClear nzMode="multiple" style="width: 100%"
                                nzShowSearch nzServerSearch nzMaxTagCount="10" nzPlaceHolder="Type here to search"
                                [(ngModel)]="USER_IDS" (nzOnSearch)="changeRadioButton($event,sharingMode)"
                                [nzLoading]="listLoading">

                                <nz-option nzCustomContent *ngFor="let emp of employeeList;" [nzValue]="emp.ID"
                                    [nzLabel]="emp.NAME">

                                    <div nz-row *ngIf="individualGrid">
                                        <div nz-col nzSpan="2" style="margin-top: 14px;">
                                            <nz-avatar nzText="{{getInitial(emp.NAME) | uppercase }}" nzSize="large"
                                                style="color:red; background-color:#fde3cf; vertical-align: middle;">
                                            </nz-avatar>
                                        </div>

                                        <div nz-col nzSpan="22">
                                            <div nz-row>
                                                <div nz-col nzSpan="12" style="color: black; font-size: 14px;">
                                                    <b>{{emp.NAME}}</b>
                                                </div>

                                                <div nz-col nzSpan="12" style="font-size: 11px; text-align: left;">
                                                    <i nz-icon nzType="mobile" nzTheme="outline"
                                                        style="color: black;"></i>&nbsp;
                                                    {{emp.MOBILE_NUMBER}}
                                                </div>

                                                <div nz-col nzSpan="24" style="font-size: 11px;">
                                                    <i nz-icon nzType="global" nzTheme="outline"
                                                        style="font-size: 11px; color: #ff8d73;">
                                                    </i>&nbsp;
                                                    {{emp.FEDERATION_NAME}}
                                                </div>

                                                <div nz-col nzSpan="24" style="font-size: 11px;">
                                                    <i nz-icon nzType="deployment-unit" nzTheme="outline"
                                                        style="font-size: 11px; color: #ff8d73;">
                                                    </i>&nbsp;
                                                    {{emp.UNIT_NAME}}
                                                </div>

                                                <div nz-col nzSpan="24" style="font-size: 11px;">
                                                    <i nz-icon nzType="team" nzTheme="outline"
                                                        style="font-size: 11px; color: #ff8d73;">
                                                    </i>&nbsp;
                                                    {{emp.GROUP_NAME}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngIf="FederationGrid">
                                        {{emp.NAME}}
                                    </div>

                                    <div *ngIf="unitGrid">
                                        {{emp.NAME}}
                                    </div>

                                    <div *ngIf="groupGrid">
                                        {{emp.NAME}}
                                    </div>
                                </nz-option>
                            </nz-select>
                        </nz-input-group>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="24">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>Title</nz-form-label>

                        <nz-form-control nzHasFeedback nzErrorTip="Notification Title is Required">
                            <input nz-input autocomplete="off" placeholder="Enter Notification Title" name="title"
                                type="text" pattern="([A-Za-z0-9\s]){1,}" [(ngModel)]="TITLE" required
                                maxlength="250" />
                        </nz-form-control>

                        <span *ngIf="TITLE" style="font-size: 10px; color: red;">
                            {{TITLE.length}}/ 250
                        </span>
                    </nz-form-item>
                </div>

                <div nz-col nzSpan="24">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>Description</nz-form-label>

                        <nz-form-control nzHasFeedback nzErrorTip="Notification Description is Required">
                            <textarea nz-input rows="5" name="description" placeHolder="Enter Notification Description"
                                [(ngModel)]="DESCRIPTION" maxlength="2000" required>
                            </textarea>
                        </nz-form-control>

                        <span *ngIf="DESCRIPTION" style="font-size: 10px; color: red;">
                            {{DESCRIPTION.length}}/ 2000
                        </span>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row class="my-box" nzGutter="5" *ngIf="NOTI_TYPE=='I'">
                <div nz-col nzSpan="12">
                    <div nz-row>
                        <div nz-col nzSpan="24">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>Image</nz-form-label>

                                <nz-form-control>
                                    <button nz-button style="height: 28px; padding: 0px 7px; font-size: 12px;"
                                        (click)="fileInput.click()">Choose File
                                        <input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)"
                                            (click)="fileInput.value = null" style="display: none;" />
                                    </button>
                                </nz-form-control>
                            </nz-form-item>
                        </div>

                        <div nz-col nzSpan="23" *ngIf="fileURL != null" style="overflow: hidden; font-size: 13px;">
                            {{fileURL.name}}
                        </div>

                        <div nz-col nzSpan="1" *ngIf="fileURL!= null">
                            <i nz-icon nzType="delete" (click)="clear()" [nzTheme]="'twotone'"
                                [nzTwotoneColor]="'#ff0000'">
                            </i>
                        </div>
                    </div>
                </div>

                <div nz-col nzSpan="12">
                    <div nz-col nzSpan="24" *ngIf="photoURL != null">
                        <nz-form-item>
                            <nz-form-control>
                                <div style="text-align: left;">
                                    <img style="height: 100px; width: 100px; border: solid black 2px; border-radius: 5px;"
                                        [src]="photoURL">
                                </div>
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                </div>
            </div>
        </nz-spin>
    </form>

    <div class="footer">
        <button type="button" nz-button (click)="close(myForm)" class="ant-btn" style="margin-right: 8px;">
            <span>Cancel</span>
        </button>

        <button type="button" class="ant-btn ant-btn-primary" nz-button [nzLoading]="isSpinning" nz-dropdown
            (click)="save(myForm)">
            <span>Send</span>
        </button>
    </div>
</div>