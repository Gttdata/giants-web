<nz-spin [nzSpinning]='loadingRecords'>
    <div
        style="border-radius: 8px; background-color: white; padding: 10px; margin: 10px; position: sticky; top: 0px; z-index: 10;">
        <div nz-row>
            <div nz-col nzXs="0" nzSm="0" nzMd="8" nzLg="8" nzXl="8">
                <div style="text-align: left; padding: 5px;">
                    <span class="formname">
                        <i nz-icon nzType="left-circle" nzTheme="outline" (click)="back()"></i>
                        {{formTitle}}
                    </span>
                </div>
            </div>

            <div nz-col nzXs="0" nzSm="0" nzMd="8" nzLg="8" nzXl="8" style="text-align: center;">
                <button nz-button nzType="default"
                    style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;" (click)="add()"
                    *ngIf="(federationID > 0) || (unitID > 0) || (groupID > 0)">
                    <i nz-icon nzType="plus"></i>
                    Create
                </button>
            </div>

            <div nz-col nzXs="0" nzSm="0" nzMd="8" nzLg="8" nzXl="8" style="text-align: right;">
                <nz-input-group [nzPrefix]="prefixIcon" [nzSuffix]="suffixIcon">
                    <input nz-input type="text" name="search" autocomplete="off" placeholder="Search Here.."
                        (keydown.enter)="addSearchTextForSearching(searchText)" [(ngModel)]="searchText" />
                </nz-input-group>

                <ng-template #prefixIcon>
                    <span nz-icon nzType="search"></span>
                </ng-template>

                <ng-template #suffixIcon>
                    <i nz-icon nzType="filter" nzTheme="outline" (click)="openAdvanceFilter()"
                        nzTooltipTitle="Advance Filter" nzTooltipPlacement="top" nz-tooltip>
                    </i>
                </ng-template>
            </div>

            <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                <div style="text-align: center; padding: 5px;">
                    <span class="formname">
                        <i nz-icon nzType="left-circle" nzTheme="outline" (click)="back()"></i>
                        {{formTitle}}
                    </span>
                </div>
            </div>

            <div nz-col nzXs="8" nzSm="8" nzMd="0" nzLg="0" nzXl="0">
                <div style="text-align: center;">
                    <button nz-button nzType="default"
                        style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;" (click)="add()"
                        *ngIf="(federationID > 0) || (unitID > 0) || (groupID > 0)">
                        <i nz-icon nzType="plus"></i>
                        Create
                    </button>
                </div>
            </div>

            <div nz-col nzXs="16" nzSm="16" nzMd="0" nzLg="0" nzXl="0" style="text-align: right;">
                <nz-input-group [nzPrefix]="prefixIcon" [nzSuffix]="suffixIcon">
                    <input nz-input type="text" name="search" autocomplete="off" placeholder="Search Here.."
                        (keydown.enter)="addSearchTextForSearching(searchText)" [(ngModel)]="searchText" />
                </nz-input-group>

                <ng-template #prefixIcon>
                    <span nz-icon nzType="search"></span>
                </ng-template>

                <ng-template #suffixIcon>
                    <i nz-icon nzType="filter" nzTheme="outline" (click)="openAdvanceFilter()"
                        nzTooltipTitle="Advance Filter" nzTooltipPlacement="top" nz-tooltip>
                    </i>
                </ng-template>
            </div>
        </div>
    </div>

    <div *ngIf="advanceFilterModalVisible"
        style="border-radius: 8px; background-color: white; padding: 10px; margin: 10px; position: sticky; top: 0px; z-index: 10;">
        <div style="max-height: 250px; overflow: auto;">
            <div nz-row>
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Status</nz-form-label>

                        <nz-form-control>
                            <div style="display: inline;">
                                <label nz-checkbox name="activeStatus" [(ngModel)]="ACTIVE_STATUS">Active</label>
                            </div>

                            <div style="display: inline;">
                                <label nz-checkbox name="droppedStatus" [(ngModel)]="DROPPED_STATUS">Dropped</label>
                            </div>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row>
                <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Federation(s)</nz-form-label>

                        <nz-form-control>
                            <nz-select name="federation" [nzMaxTagCount]="3" nzShowSearch nzMode="multiple" nzAllowClear
                                style="width: 100%" nzPlaceHolder="Select Federation(s)" [(ngModel)]="FEDERATION_ID">

                                <nz-option *ngFor="let federation of federations;" [nzValue]="federation.NAME"
                                    [nzLabel]="federation.NAME">
                                </nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Unit(s)</nz-form-label>

                        <nz-form-control>
                            <nz-select name="unit" [nzMaxTagCount]="3" [nzSuffixIcon]="suffixIcon" nzShowSearch
                                nzServerSearch nzMode="multiple" nzAllowClear style="width: 100%"
                                nzPlaceHolder="Type here to search" [(ngModel)]="UNIT_ID"
                                (nzOnSearch)="getUnits($event)">

                                <nz-option nzCustomContent *ngFor="let unit of units;" [nzValue]="unit.NAME"
                                    [nzLabel]="unit.NAME">
                                    <div nz-row>
                                        <div nz-col nzSpan="24">
                                            {{unit.NAME}}
                                        </div>

                                        <div nz-col nzSpan="24">
                                            <div style="font-size: 10px; color: gray;">
                                                <i nz-icon nzType="global" nzTheme="outline" style="color: #ff8d73;">
                                                </i>

                                                {{unit.FEDERATION_NAME}}
                                            </div>
                                        </div>
                                    </div>
                                </nz-option>
                            </nz-select>

                            <ng-template #suffixIcon>
                                <div style="cursor: pointer;">
                                    <span nz-popover nzPopoverTitle="Info" [nzPopoverContent]="contentTemplate"
                                        nzPopoverPlacement="top"
                                        style="font-size: 17px; font-weight: bold; font-family: Georgia, 'Times New Roman', Times, serif;">
                                        i
                                    </span>
                                </div>

                                <ng-template #contentTemplate>
                                    <div>
                                        <p>Enter at least three characters to search</p>
                                    </div>
                                </ng-template>
                            </ng-template>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row>
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" style="text-align: right;">
                    <button nz-button
                        style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin-right: 3px;"
                        nzType="default" (click)="advanceFilterModalCancel()">
                        Cancel
                    </button>

                    <button nz-button
                        style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin-right: 3px;"
                        nzType="default" (click)="clearAdvanceFilter()">
                        Clear
                    </button>

                    <button nz-button
                        style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin-right: 3px;"
                        nzType="default" (click)="advanceFilterModalOk()">
                        Apply
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="(multipleSearchText.length > 0) || (advanceMultipleSearchText.length > 0) || (advanceMultipleFederationNames.length > 0) || (advanceMultipleUnitNames.length > 0)"
        style="height: 7vh; overflow-y: auto; border-radius: 8px; background-color: white; padding: 10px; margin: 10px; position: sticky; top: 0px; z-index: 10;">
        <div nz-row>
            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                <div style="padding: 3px 0px 3px 0px;">
                    <span *ngIf="multipleSearchText.length > 0">
                        <span *ngFor="let text of multipleSearchText; let i = index;">
                            <nz-tag [nzColor]="'magenta'" nzMode="closeable" (nzOnClose)="onClose(i)"
                                style="font-size: 10px; padding: 1px; margin: 1px;">
                                {{text}}
                            </nz-tag>
                        </span>
                    </span>

                    <span *ngIf="advanceMultipleSearchText.length > 0">
                        <span *ngFor="let text of advanceMultipleSearchText; let j = index;">
                            <nz-tag [nzColor]="'magenta'" nzMode="closeable" (nzOnClose)="onAdvanceFilterTagClose(j)"
                                style="font-size: 10px; padding: 1px; margin: 1px;">
                                {{text}}
                            </nz-tag>
                        </span>
                    </span>

                    <span *ngIf="advanceMultipleFederationNames.length > 0">
                        <span *ngFor="let text of advanceMultipleFederationNames; let k = index;">
                            <nz-tag [nzColor]="'magenta'" nzMode="closeable"
                                (nzOnClose)="onAdvanceFilterFederationNamesTagClose(k)"
                                style="font-size: 10px; padding: 1px; margin: 1px;">
                                {{text}}
                            </nz-tag>
                        </span>
                    </span>

                    <span *ngIf="advanceMultipleUnitNames.length > 0">
                        <span *ngFor="let text of advanceMultipleUnitNames; let l = index;">
                            <nz-tag [nzColor]="'magenta'" nzMode="closeable"
                                (nzOnClose)="onAdvanceFilterUnitNamesTagClose(l)"
                                style="font-size: 10px; padding: 1px; margin: 1px;">
                                {{text}}
                            </nz-tag>
                        </span>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="!advanceFilterModalVisible" id="activityItem" [ngStyle]="{ height: getHeigth() }"
        style="overflow-y: auto; padding: 10px;" (scroll)="onScroll($event)">
        <div id="top"></div>

        <div *ngIf="dataList.length > 0">
            <div *ngFor="let group of dataList; let i = index;"
                style="border-radius: 8px; background-image: linear-gradient(to bottom right, #ffffff, #ffffff); padding: 10px; margin-bottom: 10px;">
                <div nz-row>
                    <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                        <div style="text-align: right; padding: 5px;">
                            <span style="font-size: 10px;"
                                *ngIf="(group.FEDERATION_SHORT_NAME) || (group.UNIT_SHORT_NAME) || (group.SHORT_NAME)">
                                <span style="border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.FEDERATION_SHORT_NAME">
                                    {{group.FEDERATION_SHORT_NAME}}
                                </span>

                                <span style="border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.UNIT_SHORT_NAME">
                                    {{group.UNIT_SHORT_NAME}}
                                </span>

                                <span style=" border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.SHORT_NAME">
                                    {{group.SHORT_NAME}}
                                </span>
                            </span>

                            <span style="font-size: 15px;">
                                <span
                                    *ngIf="((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID)) && (group.STATUS)">
                                    &nbsp;

                                    <i nz-icon nzType="close-circle" nzTheme="outline" nz-tooltip
                                        [nzTooltipTitle]="dropMemberTooltipTemplate" nzTooltipPlacement="top"
                                        nz-popconfirm [nzPopconfirmTitle]="dropGroupPopConfirmTemplate"
                                        (nzOnConfirm)="dropGroup(group)" (nzOnCancel)="cancel()"
                                        nzPopconfirmPlacement="top" style="color: red;">
                                    </i>

                                    <ng-template #dropMemberTooltipTemplate>
                                        Drop <b>{{group["GROUP_NAME"]}}</b>
                                    </ng-template>

                                    <ng-template #dropGroupPopConfirmTemplate>
                                        Are you sure, drop <b>{{group["GROUP_NAME"]}}</b>?
                                    </ng-template>
                                </span>

                                <span
                                    *ngIf="((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID)) && (!group.STATUS) && (group.DROPPED_STATUS)">
                                    &nbsp;

                                    <i nz-icon nzType="check-circle" nzTheme="outline" nz-tooltip
                                        [nzTooltipTitle]="reviveGroupTooltipTemplate" nzTooltipPlacement="top"
                                        style="color: green;" (click)="openReviveGroupModal(group)">
                                    </i>

                                    <ng-template #reviveGroupTooltipTemplate>
                                        Revive <b>{{group["GROUP_NAME"]}}</b>
                                    </ng-template>
                                </span>

                                <span
                                    *ngIf="(federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A'))">
                                    &nbsp;

                                    <i nz-icon nzType="edit" nzTheme="twotone" nz-tooltip
                                        nzTooltipTitle="Edit Group Details" nzTooltipPlacement="top"
                                        (click)="edit(group)">
                                    </i>
                                </span>

                                <span
                                    *ngIf="(group.GROUP_STATUS != 'SFA') && ((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A')))">
                                    &nbsp;

                                    <i nz-icon nzType="user" nzTheme="outline" nz-tooltip
                                        nzTooltipTitle="Add Single Member" nzTooltipPlacement="top"
                                        (click)="addGroupMembers(group)">
                                    </i>
                                </span>

                                <span *ngIf="(groupID == group['GROUP_ID'])">
                                    &nbsp;

                                    <i nz-icon nzType="upload" nzTheme="outline" nz-tooltip
                                        nzTooltipTitle="Upload Audit Report" nzTooltipPlacement="top"
                                        (click)="showAuditReportModal()">
                                    </i>
                                </span>
                            </span>
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="16" nzLg="16" nzXl="16">
                        <div style="font-weight: bold; text-align: left; color: black; padding: 5px;">
                            {{group["GROUP_NAME"]}}
                        </div>
                    </div>

                    <div nz-col nzXs="0" nzSm="0" nzMd="8" nzLg="8" nzXl="8">
                        <div style="text-align: right; padding: 5px;">
                            <div style="font-size: 10px; display: inline;"
                                *ngIf="(group.FEDERATION_SHORT_NAME) || (group.UNIT_SHORT_NAME) || (group.SHORT_NAME)">
                                <span style="border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.FEDERATION_SHORT_NAME">
                                    {{group.FEDERATION_SHORT_NAME}}
                                </span>

                                <span style="border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.UNIT_SHORT_NAME">
                                    {{group.UNIT_SHORT_NAME}}
                                </span>

                                <span style=" border: 1px solid black; padding: 3px; background-color: #f0f2f5;"
                                    *ngIf="group.SHORT_NAME">
                                    {{group.SHORT_NAME}}
                                </span>
                            </div>

                            <div style="display: inline;">
                                <span
                                    *ngIf="((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID)) && (group.STATUS)">
                                    &nbsp;

                                    <i nz-icon nzType="close-circle" nzTheme="outline" nz-tooltip
                                        [nzTooltipTitle]="dropMemberTooltipTemplate" nzTooltipPlacement="top"
                                        nz-popconfirm [nzPopconfirmTitle]="dropGroupPopConfirmTemplate"
                                        (nzOnConfirm)="dropGroup(group)" (nzOnCancel)="cancel()"
                                        nzPopconfirmPlacement="top" style="color: red;">
                                    </i>

                                    <ng-template #dropMemberTooltipTemplate>
                                        Drop <b>{{group["GROUP_NAME"]}}</b>
                                    </ng-template>

                                    <ng-template #dropGroupPopConfirmTemplate>
                                        Are you sure, drop <b>{{group["GROUP_NAME"]}}</b>?
                                    </ng-template>
                                </span>

                                <span
                                    *ngIf="((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID)) && (!group.STATUS) && (group.DROPPED_STATUS)">
                                    &nbsp;

                                    <i nz-icon nzType="check-circle" nzTheme="outline" nz-tooltip
                                        [nzTooltipTitle]="reviveGroupTooltipTemplate" nzTooltipPlacement="top"
                                        style="color: green;" (click)="openReviveGroupModal(group)">
                                    </i>

                                    <ng-template #reviveGroupTooltipTemplate>
                                        Revive <b>{{group["GROUP_NAME"]}}</b>
                                    </ng-template>
                                </span>

                                <span
                                    *ngIf="(federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A'))">
                                    &nbsp;

                                    <i nz-icon nzType="edit" nzTheme="twotone" nz-tooltip
                                        nzTooltipTitle="Edit Group Details" nzTooltipPlacement="top"
                                        (click)="edit(group)">
                                    </i>
                                </span>

                                <span
                                    *ngIf="(group.GROUP_STATUS != 'SFA') && ((federationID == group.FEDERATION_ID) || (unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A')))">
                                    &nbsp;

                                    <i nz-icon nzType="user" nzTheme="outline" nz-tooltip
                                        nzTooltipTitle="Add Single Member" nzTooltipPlacement="top"
                                        (click)="addGroupMembers(group)">
                                    </i>
                                </span>

                                <span *ngIf="(groupID == group['GROUP_ID'])">
                                    &nbsp;

                                    <i nz-icon nzType="upload" nzTheme="outline" nz-tooltip
                                        nzTooltipTitle="Upload Audit Report" nzTooltipPlacement="top"
                                        (click)="showAuditReportModal()">
                                    </i>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                        <div style="font-size: 10px; text-align: left; color: gray; padding: 5px;">
                            <i nz-icon nzType="global" nzTheme="outline" style="color: #ff7a7a"></i>
                            {{group.FEDERATION_NAME}}
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                        <div style="font-size: 10px; text-align: left; color: gray; padding: 5px;">
                            <i nz-icon nzType="deployment-unit" nzTheme="outline" style="color: #ff7a7a"></i>
                            {{group.UNIT_NAME}}
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
                        <div *ngIf="group.SPONSERED_GROUP_NAME"
                            style="font-size: 10px; text-align: left; color: gray; padding: 5px;">
                            ~ Sponsored By : {{group.SPONSERED_GROUP_NAME}}
                        </div>
                    </div>

                    <div nz-col nzXs="0" nzSm="0" nzMd="12" nzLg="12" nzXl="12">
                        <div *ngIf="((group.GROUP_STATUS == 'CA') || (group.GROUP_STATUS == 'R'))">
                            <div *ngIf="((unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0)))"
                                style="font-size: 10px; text-align: right; color: gray; padding: 5px;">
                                ~ Status :

                                <a (click)="onStatusClick(group)">
                                    {{getGroupStatus(group.GROUP_STATUS)}}
                                </a>
                            </div>

                            <div *ngIf="((unitID != group.UNIT_ID) && (groupID != group['GROUP_ID']) && ((groupID != group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0))) || (federationID == group.FEDERATION_ID)"
                                style="font-size: 10px; text-align: right; color: gray; padding: 5px;">
                                ~ Status : {{getGroupStatus(group.GROUP_STATUS)}}
                            </div>
                        </div>

                        <div *ngIf="(group.GROUP_STATUS != 'CA') && (group.GROUP_STATUS != 'R') && (group.GROUP_STATUS != 'A')"
                            style="font-size: 10px; text-align: right; color: gray; padding: 3px;">
                            ~ Status : {{getGroupStatus(group.GROUP_STATUS)}}
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                        <div *ngIf="((group.GROUP_STATUS == 'CA') || (group.GROUP_STATUS == 'R'))">
                            <div *ngIf="((unitID == group.UNIT_ID) || (groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0)))"
                                style="font-size: 10px; color: gray; padding: 5px;">
                                ~ Status :

                                <a (click)="onStatusClick(group)">
                                    {{getGroupStatus(group.GROUP_STATUS)}}
                                </a>
                            </div>

                            <div *ngIf="((unitID != group.UNIT_ID) && (groupID != group['GROUP_ID']) && ((groupID != group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0))) || (federationID == group.FEDERATION_ID)"
                                style="font-size: 10px; color: gray; padding: 5px;">
                                ~ Status : {{getGroupStatus(group.GROUP_STATUS)}}
                            </div>
                        </div>

                        <div *ngIf="(group.GROUP_STATUS != 'CA') && (group.GROUP_STATUS != 'R') && (group.GROUP_STATUS != 'A')"
                            style="font-size: 10px; color: gray; padding: 3px;">
                            ~ Status : {{getGroupStatus(group.GROUP_STATUS)}}
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                        <div *ngIf="(group.REVIVED_BY_GROUP_ID) && (group.REVIVED_BY_GROUP_ID > 0)"
                            style="font-size: 10px; text-align: left; color: gray; padding: 5px;">
                            ~ Revived By : {{group.REVIVED_BY_GROUP_NAME}}
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24"
                        style="border-radius: 8px; background-color: #f0f2f5; padding: 7px; font-size: 12px; text-align: center; color: #000102;">
                        <div nz-col nzXs="8" nzSm="8" nzMd="4" nzLg="4" nzXl="4" style="margin-bottom: -12px;">
                            <p
                                style="font-family: 'Courier New', Courier, monospace; font-size: 15px; font-weight: bold;">
                                {{group.POST_COUNT || 0}}
                            </p>

                            <p style="margin-top: -10px"><i nz-icon nzType="qrcode" nzTheme="outline"></i>
                                Posts
                            </p>
                        </div>

                        <div nz-col nzXs="8" nzSm="8" nzMd="5" nzLg="5" nzXl="5" style="margin-bottom: -12px;">
                            <p
                                style="font-family: 'Courier New', Courier, monospace; font-size: 15px; font-weight: bold;">
                                {{group.MEETING_COUNT || 0}}
                            </p>

                            <p style="margin-top: -10px"><i nz-icon nzType="calendar" nzTheme="outline"></i>
                                Meetings
                            </p>
                        </div>

                        <div nz-col nzXs="8" nzSm="8" nzMd="5" nzLg="5" nzXl="5" style="margin-bottom: -12px;">
                            <p
                                style="font-family: 'Courier New', Courier, monospace; font-size: 15px; font-weight: bold;">
                                {{group.EVENT_COUNT || 0}}
                            </p>

                            <p style="margin-top: -10px"><i nz-icon nzType="carry-out" nzTheme="outline"></i>
                                Events
                            </p>
                        </div>

                        <div nz-col nzXs="8" nzSm="8" nzMd="5" nzLg="5" nzXl="5" style="margin-bottom: -12px;">
                            <p
                                style="font-family: 'Courier New', Courier, monospace; font-size: 15px; font-weight: bold;">
                                {{group.CIRCULAR_COUNT || 0}}
                            </p>

                            <p style="margin-top: -10px"><i nz-icon nzType="audit" nzTheme="outline"></i>
                                Circulars
                            </p>
                        </div>

                        <div nz-col nzXs="8" nzSm="8" nzMd="5" nzLg="5" nzXl="5" style="margin-bottom: -12px;">
                            <p
                                style="font-family: 'Courier New', Courier, monospace; font-size: 15px; font-weight: bold;">
                                {{group.PROJECT_COUNT || 0}}
                            </p>

                            <p style="margin-top: -10px"><i nz-icon nzType="apartment" nzTheme="outline"></i>
                                Projects
                            </p>
                        </div>
                    </div>

                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                        <div style="text-align: center; padding-top: 5px;">
                            <button nz-button nzType="default"
                                style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                (click)="goToMemberMaster(group)" nzJustify="end">

                                <span style="font-size: 10px;">
                                    <i nz-icon nzType="team" nzTheme="outline"></i>
                                    Members : {{group.MEMBER_COUNT || 0}}
                                </span>
                            </button>

                            <button nz-button nzType="default"
                                *ngIf="(group.GROUP_STATUS != 'SFA') && ((groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A')))"
                                style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                (click)="downloadCSVFile()" nzTooltipTitle="Download CSV File for Bulk Members"
                                nzTooltipPlacement="top" nz-tooltip>

                                <span nz-icon nzType="download" nzTheme="outline"></span>
                            </button>

                            <button nz-button nzType="default"
                                *ngIf="(group.GROUP_STATUS != 'SFA') && ((groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A')))"
                                style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                (click)="openImportDrawer(group)" nzTooltipTitle="Upload CSV File for Bulk Members"
                                nzTooltipPlacement="top" nz-tooltip>

                                <span nz-icon nzType="upload" nzTheme="outline"></span>
                            </button>

                            <button nz-button nzType="default"
                                style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                (click)="addMembers(group)" nzJustify="end">

                                <span style="font-size: 10px;">
                                    <i nz-icon nzType="user" nzTheme="outline"></i>
                                    BOD
                                </span>
                            </button>

                            <button nz-button nzType="default"
                                *ngIf="((groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0))) && ((group.GROUP_STATUS == 'C') || (group.GROUP_STATUS == 'R'))"
                                style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;
                                    margin: 3px;" (click)="addFeeStructure(group)" nzJustify="end">

                                <span style="font-size: 10px;">
                                    Fees
                                </span>
                            </button>

                            <span *ngIf="(unitID > 0) || (groupID > 0)">
                                <span
                                    *ngIf="((groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0) && (group.GROUP_STATUS != 'A')))">
                                    <button nz-button nzType="default"
                                        style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                        (click)="goToPayments(group)" nzJustify="end">

                                        <span style="font-size: 10px;">
                                            Payments
                                        </span>
                                    </button>
                                </span>

                                <span
                                    *ngIf="(unitID == group.UNIT_ID) && ((group.GROUP_STATUS == 'C') || (group.GROUP_STATUS == 'R'))">
                                    <button nz-button nzType="default" (click)="goToSendForApproval(group)"
                                        style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                        nzJustify="end">

                                        <span style="font-size: 10px;">
                                            Send For Approval
                                        </span>
                                    </button>
                                </span>

                                <span
                                    *ngIf="((groupID == group['GROUP_ID']) || ((groupID == group.SPONSERED_GROUP) && (group.SPONSERED_GROUP > 0))) && ((group.GROUP_STATUS == 'C') || (group.GROUP_STATUS == 'R'))">
                                    <button nz-button nzType="default" nz-popconfirm
                                        nzPopconfirmTitle="Are you sure want to send?"
                                        (nzOnConfirm)="sendForUnitDirector(group)" (nzOnCancel)="cancel()"
                                        nzPopconfirmPlacement="top"
                                        style="height: 25px; border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff; margin: 3px;"
                                        nzJustify="end">

                                        <span style="font-size: 10px;">
                                            Send to Unit Director
                                        </span>
                                    </button>
                                </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="dataList.length == 0" style="margin-top: 20px">
            <nz-empty
                [nzNotFoundImage]="'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original'"
                [nzNotFoundContent]="contentTpl">
            </nz-empty>

            <ng-template #contentTpl>
                <span>No data available.</span>
            </ng-template>
        </div>
    </div>
</nz-spin>

<!-- Group info drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="getAddDrawerWidth()"
    [nzVisible]="drawerVisible" [nzTitle]="drawerTitle" (nzOnClose)="drawerClose()" (nzKeyboard)="true">

    <app-group-drawer [drawerClose]="closeCallback" [drawerVisible]="drawerVisible" [data]="drawerData">
    </app-group-drawer>
</nz-drawer>

<!-- Group fee drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="getAddDrawerWidth()"
    [nzVisible]="drawerVisibleFees" [nzTitle]="drawerTitleFees" (nzOnClose)="drawerCloseFees()" (nzKeyboard)="true">

    <app-group-fee-type-drawer [drawerClose]="closeCallbackFees" [drawerVisible]="drawerVisibleFees"
        [feeDetails]="feeDetails">
    </app-group-fee-type-drawer>
</nz-drawer>

<!-- Group BOD drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="getWidth()"
    [nzVisible]="memberDrawerVisible" [nzTitle]="memberDrawerTitle" (nzOnClose)="memberDrawerClose()"
    (nzKeyboard)="true">

    <app-assign-group-member [drawerClose]="memberDrawerCloseCallback" [drawerVisible]="memberDrawerVisible"
        [data]="memberDrawerData">
    </app-assign-group-member>
</nz-drawer>

<!-- Upload member drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="getWidth()"
    [nzVisible]="newMemberDrawerVisible" [nzTitle]="newMemberDrawerTitle" (nzOnClose)="newMemberDrawerClose()"
    (nzKeyboard)="true">

    <app-member-drawer [drawerClose]="newMemberDrawerCloseCallback" [drawerVisible]="newMemberDrawerVisible"
        [data]="newMemberDrawerData" [currentGroupInfo]="currentGroupInfo">
    </app-member-drawer>
</nz-drawer>

<!-- Bulk members upload drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="true" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="1300" [nzVisible]="importDrawerVisible"
    [nzTitle]="importDrawerTitle" (nzOnClose)="importDrawerClose()" (nzKeyboard)="true">

    <app-member-upload [drawerClose]="importCloseCallback" [drawerVisible]="importDrawerVisible"
        [currentGroupInfo]="currentGroupInfo">
    </app-member-upload>
</nz-drawer>

<!-- Send for approval drawer -->
<nz-drawer [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom': '53px' }"
    [nzClosable]="false" [nzMask]="true" [nzMaskClosable]="false" [nzWidth]="1300"
    [nzVisible]="sendApprovalDrawerVisible" [nzTitle]="sendApprovalDrawerTitle" (nzOnClose)="sendApprovalDrawerClose()"
    (nzKeyboard)="true">

    <app-send-for-approval [drawerClose]="sendApprovalDrapwerCloseCallback" [drawerVisible]="sendApprovalDrawerVisible"
        [DOCUMENTS_LIST]="DOCUMENTS_LIST" [PAYMENT_LIST]="PAYMENT_LIST" [BIO_DATA_LIST]="BIO_DATA_LIST"
        [GROUP_INFO]="GROUP_INFO" [GROUP_INFO_FOR_DRAWER]="GROUP_INFO_FOR_DRAWER">
    </app-send-for-approval>
</nz-drawer>

<!-- Group remark modal -->
<nz-modal [(nzVisible)]="groupStatusModalVisible" [nzTitle]="'Rejection Remark(s)'"
    [nzContent]="groupStatusModalContent" [nzFooter]="groupStatusModalFooter" (nzOnCancel)="groupStatusModalCancel()"
    nzClosable="false">
    <ng-template #groupStatusModalContent>
        <div style="height: 350px; overflow: auto;">
            <div nz-row *ngIf="remark != ''">
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Remark</nz-form-label>

                        <nz-form-control>
                            {{remark}}
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row *ngIf="memberRemark != ''">
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Member Remark</nz-form-label>

                        <nz-form-control>
                            {{memberRemark}}
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row *ngIf="paymentRemark != ''">
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <nz-form-item>
                        <nz-form-label nzNoColon>Payment Remark</nz-form-label>

                        <nz-form-control>
                            {{paymentRemark}}
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row *ngIf="bodRemark != ''">
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <nz-form-item>
                        <nz-form-label nzNoColon>BOD Remark</nz-form-label>

                        <nz-form-control>
                            {{bodRemark}}
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>
        </div>
    </ng-template>

    <ng-template #groupStatusModalFooter>
        <button nz-button style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;" nzType="default"
            (click)="groupStatusModalCancel()">
            Close
        </button>
    </ng-template>
</nz-modal>

<!-- Upload audit report modal -->
<nz-modal [(nzVisible)]="isAuditReportModalVisible" nzTitle="Upload Audit Report"
    (nzOnCancel)="handleAuditReportCancel()" [nzContent]="auditReportContent" [nzFooter]="auditReportModalFooter"
    nzClosable="false">
    <ng-template #auditReportContent>
        <nz-spin [nzSpinning]="isAuditReportLoading">
            <div nz-row>
                <div nz-col nzXs="12" nzSm="12" nzMd="12" nzLg="12" nzXl="12">
                    <nz-form-item>
                        <nz-form-label nzRequired nzNoColon>Year</nz-form-label>

                        <nz-form-control>
                            <nz-select nzPlaceHolder="Year" name="year"
                                (ngModelChange)="onAuditReportYearChange($event)" [(ngModel)]="SELECTED_YEAR"
                                nzShowSearch style="width: 100%;">

                                <nz-option *ngFor="let fillYears of range;" [nzValue]="fillYears" [nzLabel]="fillYears">
                                </nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <div nz-row>
                <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                    <div nz-row>
                        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                            <nz-form-item>
                                <nz-form-label nzRequired nzNoColon>Audit Report File</nz-form-label>

                                <nz-form-control>
                                    <button nz-button style="height: 28px; padding: 0px 7px; font-size: 12px;"
                                        (click)="pdfFileInput1.click()">Choose File

                                        <input #pdfFileInput1 type="file" accept="application/pdf,image/*"
                                            (change)="onPdfFileSelected1($event)" (click)="pdfFileInput1.value = null"
                                            style="display: none;" />
                                    </button>
                                </nz-form-control>
                            </nz-form-item>
                        </div>

                        <div nz-col nzXs="23" nzSm="23" nzMd="23" nzLg="23" nzXl="23" *ngIf="pdfFileURL1"
                            style="overflow: hidden; font-size: 13px;">
                            {{pdfFileURL1.name}}
                        </div>

                        <div nz-col nzXs="1" nzSm="1" nzMd="1" nzLg="1" nzXl="1" *ngIf="pdfFileURL1">
                            <i nz-icon nzType="delete" (click)="pdfClear1()" [nzTheme]="'twotone'"
                                [nzTwotoneColor]="'#ff0000'">
                            </i>
                        </div>

                        <div nz-col nzXs="23" nzSm="23" nzMd="23" nzLg="23" nzXl="23"
                            *ngIf="(AUDIT_REPORT_URL) && (pdfFileURL1 == null)"
                            style="overflow: hidden; font-size: 13px;">

                            <a (click)="viewAuditReport(AUDIT_REPORT_URL)">
                                {{AUDIT_REPORT_URL}}
                            </a>
                        </div>

                        <div nz-col nzXs="1" nzSm="1" nzMd="1" nzLg="1" nzXl="1"
                            *ngIf="(AUDIT_REPORT_URL) && (pdfFileURL1 == null)">

                            <i nz-icon nzType="delete" (click)="pdfClear1()" [nzTheme]="'twotone'"
                                [nzTwotoneColor]="'#ff0000'">
                            </i>
                        </div>
                    </div>
                </div>
            </div>
        </nz-spin>
    </ng-template>

    <ng-template #auditReportModalFooter>
        <button nz-button nzType="default" style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;"
            (click)="handleAuditReportCancel()">
            Close
        </button>

        <button nz-button nzType="default" *ngIf="pdfFileURL1"
            style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;" [nzLoading]="isAuditReportLoading"
            (click)="submitAuditReport()">
            {{auditReportData.ID ? "Update": "Submit"}}
        </button>
    </ng-template>
</nz-modal>

<!-- Group revive modal -->
<nz-modal [(nzVisible)]="revivedGroupModalVisible" [nzTitle]="'Revived By'" [nzContent]="revivedGroupModalContent"
    [nzFooter]="revivedGroupModalFooter" (nzOnCancel)="revivedGroupModalCancel()" nzClosable="false">
    <ng-template #revivedGroupModalContent>
        <div nz-row>
            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                <nz-form-item>
                    <nz-form-label nzNoColon>Revive By</nz-form-label>

                    <nz-form-control>
                        <nz-select name="revivedByGroupName" nzShowSearch nzAllowClear nzServerSearch
                            [nzLoading]="reviveGroupLoading" (nzOnSearch)="getRevivedByGroups($event)"
                            style="width: 100%" nzPlaceHolder="Type Here to Search Group"
                            [(ngModel)]="REVIVED_BY_GROUP_ID">

                            <nz-option nzCustomContent *ngFor="let group of revivedByGroups;" [nzValue]="group.ID"
                                [nzLabel]="group.NAME">

                                <div nz-row>
                                    <div nz-col nzSpan="24">
                                        <b>{{group.NAME}}</b>
                                    </div>

                                    <div nz-col nzSpan="24" style="font-size: 10px;">
                                        {{group.UNIT_NAME}}
                                    </div>
                                </div>
                            </nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </div>
        </div>
    </ng-template>

    <ng-template #revivedGroupModalFooter>
        <button nz-button nzType="default" style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;"
            (click)="revivedGroupModalCancel()">
            Close
        </button>

        <button nz-button nzType="default" style="border-radius: 5px; color: #47a7ff; border: solid 1px #47a7ff;"
            (click)="reviveGroup()">
            Revive
        </button>
    </ng-template>
</nz-modal>