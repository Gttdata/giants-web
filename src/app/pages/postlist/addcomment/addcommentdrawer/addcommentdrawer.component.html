<div class="header">
    <button type="button" nz-button (click)="close(myForm)" class="ant-btn">
        <i nz-icon nzType="close" nzTheme="outline"></i>
    </button>
</div>

<form nz-form #myForm="ngForm">
    <nz-spin [nzSpinning]="isSpinning">
        <div nz-row class="my-box" style="margin-top: -10px;">
            <div nz-col nzSpan="24">
                <nz-form-item>
                    <nz-form-control>
                        <textarea nz-input type="text" id="text" name="text" placeholder="Type your comment here..."
                            [nzAutosize]="{ minRows: 4, maxRows: 5 }" [(ngModel)]="dataa.COMMENT" maxlength="2000">
                        </textarea>
                    </nz-form-control>
                </nz-form-item>
            </div>

            <div nz-col nzSpan="12">
                <span *ngIf="dataa.COMMENT" style="font-size: 10px; color: red;">
                    {{dataa.COMMENT.length}}/ 2000
                </span>
            </div>

            <div nz-col nzSpan="12" style="text-align: right;">
                <button nz-button nzType="primary" (click)="addComment()">
                    Post
                </button>
            </div>
        </div>

        <div nz-row class="my-box" id="Comment" #Comment style="padding: 10px; height: 59vh; overflow-y: auto;"
            (scroll)="onScroll($event)">
            <div *ngIf="dataList1.length > 0">
                <div *ngFor="let activity of dataList1; let i = index;">
                    <div class="card">
                        <div nz-row>
                            <div *ngIf="activity.MEMBER_ID == userID"
                                style="position: absolute; right: 1px; top: 1px; font-size: 16px; height: 30px; width: 30px; border-radius: 50%; background-color: #f0f2f5; text-align: center; cursor: pointer; border: 1px solid #bcbcbd;"
                                nz-popconfirm nzPopconfirmTitle="Are you sure delete this Comment?"
                                (nzOnConfirm)="DeleteComment(activity)" (nzOnCancel)="cancel()"
                                nzPopconfirmPlacement="topLeft">

                                <div style="margin-top: 2px;">
                                    <i nz-icon nzType="delete" nzTheme="outline" style="color: red;">
                                    </i>
                                </div>
                            </div>

                            <div nz-col nzXs="5" nzSm="5" nzMd="3" nzLg="3" nzXl="3">
                                <img style="width: 50px; height: 50px; border-radius: 50%"
                                    [src]="getProfilePhoto(activity.CREATER_MEMBER_PROFILE)" alt="user">
                            </div>

                            <div nz-col nzXs="19" nzSm="19" nzMd="18" nzLg="18" nzXl="18">
                                <div nz-row>
                                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24"
                                        style="font-size: 10px;">
                                        <i nz-icon nzType="calendar" nzTheme="outline" style="color: #FF7A7A;"></i>
                                        {{activity['CREATED_MODIFIED_DATE'] | date: 'dd MMM yyyy, hh:mm a'}}
                                    </div>

                                    <div nz-col nzXs="0" nzSm="0" nzMd="24" nzLg="24" nzXl="24">
                                        <span style="color: blue; font-weight: bold;">
                                            {{activity['CREATER_MEMBER_NAME']}}
                                        </span>

                                        <span style="color: red; font-size: 12px;">
                                            ({{activity["MEMBER_ROLE"]}})
                                        </span>
                                    </div>

                                    <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                                        <span style="color: blue; font-weight: bold;">
                                            {{activity['CREATER_MEMBER_NAME']}}
                                        </span>
                                    </div>

                                    <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                                        <span style="color: red; font-size: 12px;">
                                            ({{activity["MEMBER_ROLE"]}})
                                        </span>
                                    </div>

                                    <div nz-col nzXs="0" nzSm="0" nzMd="24" nzLg="24" nzXl="24"
                                        style="color: gray; font-size: 10px;">
                                        <span *ngIf="activity['FEDERATION_NAME']">
                                            <i nz-icon nzType="global" nzTheme="outline" style="color: #ff8d73;">
                                            </i>

                                            {{activity['FEDERATION_NAME']}},
                                        </span>

                                        <span *ngIf="activity['UNIT_NAME']">
                                            <i nz-icon nzType="deployment-unit" nzTheme="outline"
                                                style="color: #ff8d73;">
                                            </i>

                                            {{activity['UNIT_NAME']}},
                                        </span>

                                        <span *ngIf="activity['GROUP_NAME']">
                                            <i nz-icon nzType="team" nzTheme="outline" style="color: #ff8d73;">
                                            </i>

                                            {{activity['GROUP_NAME']}}
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0"
                                style="color: gray; font-size: 10px;">
                                <span *ngIf="activity['FEDERATION_NAME']">
                                    <i nz-icon nzType="global" nzTheme="outline" style="color: #ff8d73;">
                                    </i>

                                    {{activity['FEDERATION_NAME']}},
                                </span>

                                <span *ngIf="activity['UNIT_NAME']">
                                    <i nz-icon nzType="deployment-unit" nzTheme="outline" style="color: #ff8d73;">
                                    </i>

                                    {{activity['UNIT_NAME']}},
                                </span>

                                <span *ngIf="activity['GROUP_NAME']">
                                    <i nz-icon nzType="team" nzTheme="outline" style="color: #ff8d73;">
                                    </i>

                                    {{activity['GROUP_NAME']}}
                                </span>
                            </div>

                            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
                                <nz-divider></nz-divider>
                            </div>

                            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" *ngIf="!expandPostComment[i]">
                                <div
                                    style="color: black; font-size: 12px; text-align: justify; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                    {{activity.COMMENT}}
                                </div>
                            </div>

                            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" style="text-align: right;"
                                *ngIf="activity.COMMENT.length > 96">
                                <div *ngIf="!expandPostComment[i]">
                                    <a (click)="showCommentInDetails(i)" style="font-size: 10px;">
                                        Read More
                                    </a>
                                </div>
                            </div>

                            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24" *ngIf="expandPostComment[i]"
                                style="color: black; font-size: 12px; text-align: justify;">
                                {{activity.COMMENT}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="dataList1.length == 0" style="margin-top: 20px">
                <nz-empty
                    [nzNotFoundImage]="'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original'"
                    [nzNotFoundContent]="contentTpl">
                </nz-empty>

                <ng-template #contentTpl>
                    <span>No Comments available.</span>
                </ng-template>
            </div>
        </div>
    </nz-spin>
</form>

<div class="footer">
    <button type="button" nz-button style="margin-right: 8px;" class="ant-btn" style="margin-right: 8px;"
        (click)="close(myForm)">
        <span>Cancel</span>
    </button>
</div>